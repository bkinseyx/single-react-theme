{"version":3,"sources":["features/userCard/api/saveUserApi.ts","features/userCard/components/UserEditCard/formOnSubmit.ts","app/utils/liferayUtils.ts","features/userCard/api/getUsersApi.ts"],"names":["saveUserApi","user","a","store","dispatch","saveUserBegin","promisifiedLiferayService","userId","updateUserDummyData","createUserDummyData","companyId","window","Liferay","ThemeDisplay","getCompanyId","groupIds","getGroupId","saveUserSuccess","getUsersApi","saveUserFailure","formOnSubmit","formData","console","log","api","data","expectedResultType","Promise","resolve","reject","Service","result","Array","isArray","error","oldPassword","newPassword1","newPassword2","passwordReset","reminderQueryQuestion","reminderQueryAnswer","screenName","emailAddress","facebookId","openId","languageId","timeZoneId","greeting","comments","firstName","middleName","lastName","prefixId","suffixId","birthdayMonth","birthdayDay","birthdayYear","smsSn","facebookSn","jabberSn","skypeSn","twitterSn","jobTitle","organizationIds","roleIds","userGroupRoles","userGroupIds","autoPassword","password1","password2","autoScreenName","locale","male","sendEmail","serviceContext","getScopeGroupId","getUsersBegin","fetch","headers","accept","pragma","referrer","referrerPolicy","body","encodeURIComponent","method","mode","credentials","then","response","json","groupId","users","getUsersSuccess","getUsersFailure"],"mappings":"0OAeaA,EAAW,uCAAG,WAAOC,GAAP,SAAAC,EAAA,4FAMvBC,IAAMC,SAASC,2BANQ,SAOjBC,YACJL,EAAKM,OAAS,oBAAsB,iBADP,YAAC,eAGxBN,EAAKM,OAASC,IAAsBC,KAHb,IAI3BC,UAAWC,OAAOC,QAAQC,aAAaC,eACvCC,SAAU,CAACC,gBACRf,GAEL,UAfqB,OAiBvBE,IAAMC,SAASa,6BACfC,wBAlBuB,kDAoBvBf,IAAMC,SAASe,0BAAgB,EAAD,KApBP,0DAAH,uD,iCCdxB,iEAEaC,EAAe,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,SAC7BC,QAAQC,IAAI,0BACZvB,sBAAYqB,K,gCCCd,wIAGO,IAAMf,EAA4B,SACvCkB,EACAC,EACAC,GAHuC,OAKvC,IAAIC,SAAQ,SAACC,EAASC,GACpB,IACElB,OAAOC,QAAQkB,QAAQN,EAAKC,GAAM,SAACM,UACtBA,IAAWL,GAEY,UAAvBA,GAAkCM,MAAMC,QAAQF,GADzDH,EAAQG,GAIRF,EAD2B,kBAAXE,EACTA,EAEA,wBAGX,MAAOG,GACPL,EAAOK,QAIA1B,EAAsB,CACjC2B,YAAa,GACbC,aAAc,GACdC,aAAc,GACdC,eAAe,EACfC,sBAAuB,GACvBC,oBAAqB,GACrBC,WAAY,WACZC,aAAc,mBACdC,WAAY,EACZC,OAAQ,GACRC,WAAY,EACZC,WAAY,EACZC,SAAU,GACVC,SAAU,GACVC,UAAW,GACXC,WAAY,GACZC,SAAU,GACVC,SAAU,EACVC,SAAU,EACVC,cAAe,EACfC,YAAa,EACbC,aAAc,KACdC,MAAO,GACPC,WAAY,GACZC,SAAU,GACVC,QAAS,GACTC,UAAW,GACXC,SAAU,GACV/C,SAAU,KACVgD,gBAAiB,GACjBC,QAAS,GACTC,eAAgB,GAChBC,aAAc,IAGHzD,EAAsB,CACjC0D,cAAc,EACdC,UAAW,GACXC,UAAW,GACXC,gBAAgB,EAChB7B,WAAY,GACZC,aAAc,GACdC,WAAY,EACZC,OAAQ,GACR2B,OAAQ,QACRtB,UAAW,GACXC,WAAY,GACZC,SAAU,GACVC,SAAU,EACVC,SAAU,EACVmB,MAAM,EACNlB,cAAe,EACfC,YAAa,EACbC,aAAc,KACdM,SAAU,GACV/C,SAAU,KACVgD,gBAAiB,KACjBC,QAAS,KACTE,aAAc,KACdO,WAAW,EACXC,eAAgB,IAGL1D,EAAa,kBAAML,OAAOC,QAAQC,aAAa8D,oB,sIC9E/CzD,EAAW,uCAAG,4BAAAhB,EAAA,4FAMvBC,IAAMC,SAASwE,2BAEfC,MAAM,qBAAsB,CAC1BC,QAAS,CACPC,OAAQ,iDACR,kBAAmB,iBACnB,gBAAiB,WACjB,eAAgB,mDAChBC,OAAQ,WACR,iBAAkB,QAClB,iBAAkB,OAClB,iBAAkB,cAClB,mBAAoB,kBAEtBC,SAAU,6CACVC,eAAgB,6BAChBC,KACE,OACAC,mBAAmB,+CACnB,mBACFC,OAAQ,OACRC,KAAM,OACNC,YAAa,YAEZC,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,KAAKlE,QAAQC,KA/BO,SAiCFjB,YACnB,wBACA,CACEqF,QAAS3E,eAIX,SAxCqB,OAiCjB4E,EAjCiB,OA0CvBzF,IAAMC,SAASyF,0BAAgBD,IA1CR,kDA4CvBzF,IAAMC,SAAS0F,0BAAgB,EAAD,KA5CP,0DAAH","file":"static/js/19.dc6ad725.chunk.js","sourcesContent":["import { store } from 'app/store';\nimport {\n  promisifiedLiferayService,\n  updateUserDummyData,\n  createUserDummyData,\n  getGroupId,\n} from 'app/utils/liferayUtils';\nimport {\n  saveUserBegin,\n  saveUserSuccess,\n  saveUserFailure,\n  User,\n} from '../userSlice';\nimport { getUsersApi } from './getUsersApi';\n\nexport const saveUserApi = async (user: User) => {\n  if (process.env.NODE_ENV === 'development') {\n    store.dispatch(saveUserSuccess());\n    return;\n  }\n  try {\n    store.dispatch(saveUserBegin());\n    await promisifiedLiferayService(\n      user.userId ? '/user/update-user' : '/user/add-user',\n      {\n        ...(user.userId ? updateUserDummyData : createUserDummyData), // is this the appropriate place to complain that the liferay api is ridiculous?\n        companyId: window.Liferay.ThemeDisplay.getCompanyId(),\n        groupIds: [getGroupId()],\n        ...user,\n      },\n      'object'\n    );\n    store.dispatch(saveUserSuccess());\n    getUsersApi();\n  } catch (error) {\n    store.dispatch(saveUserFailure(error));\n  }\n};\n","import { User } from '../../userSlice';\nimport { saveUserApi } from 'features/userCard/api/saveUserApi';\n\nexport const formOnSubmit = ({ formData }: { formData: User }) => {\n  console.log('submitted successfully');\n  saveUserApi(formData);\n};\n","declare global {\n  interface Window {\n    Liferay: any;\n  }\n}\n\n// This abstracts out most of the error handling and makes invoking api calls\n// inside of redux actions very tight, composable with Promise.all and\n// amenable to modern async-await syntax inside of thunk actions\nexport const promisifiedLiferayService = (\n  api: string,\n  data: {},\n  expectedResultType: any\n) =>\n  new Promise((resolve, reject) => {\n    try {\n      window.Liferay.Service(api, data, (result: any) => {\n        if (typeof result === expectedResultType) {\n          resolve(result);\n        } else if (expectedResultType === 'array' && Array.isArray(result)) {\n          resolve(result);\n        } else if (typeof result === 'string') {\n          reject(result);\n        } else {\n          reject('Unexpected error.');\n        }\n      });\n    } catch (error) {\n      reject(error);\n    }\n  });\n\nexport const updateUserDummyData = {\n  oldPassword: '',\n  newPassword1: '',\n  newPassword2: '',\n  passwordReset: false,\n  reminderQueryQuestion: '',\n  reminderQueryAnswer: '',\n  screenName: 'not_null',\n  emailAddress: 'test@example.com',\n  facebookId: 0,\n  openId: '', // this is weird: only id field here that takes a string instead of an int\n  languageId: 0,\n  timeZoneId: 0,\n  greeting: '',\n  comments: '',\n  firstName: '',\n  middleName: '',\n  lastName: '',\n  prefixId: 0,\n  suffixId: 0,\n  birthdayMonth: 1,\n  birthdayDay: 1,\n  birthdayYear: 1970,\n  smsSn: '',\n  facebookSn: '',\n  jabberSn: '',\n  skypeSn: '',\n  twitterSn: '',\n  jobTitle: '',\n  groupIds: null,\n  organizationIds: [],\n  roleIds: [],\n  userGroupRoles: [],\n  userGroupIds: [],\n};\n\nexport const createUserDummyData = {\n  autoPassword: false,\n  password1: '', //\n  password2: '', //\n  autoScreenName: false,\n  screenName: '', //\n  emailAddress: '', //\n  facebookId: 0,\n  openId: '',\n  locale: 'en_US',\n  firstName: '', //\n  middleName: '', //\n  lastName: '', //\n  prefixId: 0,\n  suffixId: 0,\n  male: true,\n  birthdayMonth: 1,\n  birthdayDay: 1,\n  birthdayYear: 1970,\n  jobTitle: '',\n  groupIds: null,\n  organizationIds: null,\n  roleIds: null,\n  userGroupIds: null,\n  sendEmail: false,\n  serviceContext: {},\n};\n\nexport const getGroupId = () => window.Liferay.ThemeDisplay.getScopeGroupId();\n","import { store } from 'app/store';\nimport { promisifiedLiferayService, getGroupId } from 'app/utils/liferayUtils';\nimport {\n  getUsersBegin,\n  getUsersSuccess,\n  getUsersFailure,\n  User,\n} from '../userSlice';\n\nconst dummyUserData: User[] = [\n  {\n    userId: '1',\n    firstName: 'Ben',\n    middleName: '',\n    lastName: 'Kinsey',\n  },\n];\n\nexport const getUsersApi = async () => {\n  if (process.env.NODE_ENV === 'development') {\n    store.dispatch(getUsersSuccess(dummyUserData));\n    return;\n  }\n  try {\n    store.dispatch(getUsersBegin());\n\n    fetch('/api/jsonws/invoke', {\n      headers: {\n        accept: 'application/json, text/javascript, */*; q=0.01',\n        'accept-language': 'en-US,en;q=0.9',\n        'cache-control': 'no-cache',\n        'content-type': 'application/x-www-form-urlencoded; charset=UTF-8',\n        pragma: 'no-cache',\n        'sec-fetch-dest': 'empty',\n        'sec-fetch-mode': 'cors',\n        'sec-fetch-site': 'same-origin',\n        'x-requested-with': 'XMLHttpRequest',\n      },\n      referrer: 'http://localhost:8080/web/guest/user-admin',\n      referrerPolicy: 'no-referrer-when-downgrade',\n      body:\n        'cmd=' +\n        encodeURIComponent('/user/get-group-users\":{\"groupId\":\"20124\"}}') +\n        '&p_auth=Fs4bLSXH',\n      method: 'POST',\n      mode: 'cors',\n      credentials: 'include',\n    })\n      .then((response) => response.json())\n      .then(console.log);\n\n    const users = (await promisifiedLiferayService(\n      '/user/get-group-users',\n      {\n        groupId: getGroupId(),\n        // start: 1,\n        // end: 2\n      },\n      'array'\n    )) as User[];\n    store.dispatch(getUsersSuccess(users));\n  } catch (error) {\n    store.dispatch(getUsersFailure(error));\n  }\n};\n"],"sourceRoot":""}