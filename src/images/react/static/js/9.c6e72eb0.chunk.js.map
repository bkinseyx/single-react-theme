{"version":3,"sources":["features/userCard/api/saveUserApi.ts","features/userCard/components/UserEditCard/cancelOnClick.ts","features/userCard/selectors/getUserEditFormSelector.ts","features/userCard/components/UserEditCard/formOnChange.ts","features/userCard/components/UserEditCard/formOnSubmit.ts","features/userCard/components/UserEditCard/resetOnClick.ts","app/components/ObjectFieldTemplate/ObjectFieldTemplate.tsx","app/utils/formUtils.ts","app/components/PhoneNumberWidget/PhoneNumberWidget.tsx","app/components/CustomForm/CustomForm.tsx","features/userCard/components/UserEditCard/UserEditCard.tsx","app/components/CustomForm/CustomForm.module.css","app/components/ObjectFieldTemplate/ObjectFieldTemplate.module.css","app/utils/liferayUtils.ts","features/userCard/api/getUsersApi.ts","app/components/CardFooterWrapper/CardFooterWrapper.tsx","app/components/CardFooterWrapper/CardFooterWrapper.module.css"],"names":["saveUserApi","user","a","store","dispatch","saveUserBegin","userId","updateUserDummyData","getLiferayField","companyId","groupIds","createUserDummyData","userObj","executeLiferayService","saveUserSuccess","getUsersApi","saveUserFailure","cancelOnClick","cancelEditForm","getUserEditFormSelector","state","editForm","formOnChange","formData","setFormData","formOnSubmit","console","log","resetOnClick","resetEditForm","ObjectFieldTemplate","TitleField","properties","description","title","required","idSchema","className","styles","row","map","prop","key","content","getFieldTitleFromError","error","schema","propertyFromError","property","substr","getTransformErrors","formats","errors","errorStrings","getErrorStrings","Object","keys","includes","params","format","message","stack","split","slice","word","join","phoneNumberFormat","regex","emailAddressFormat","reduce","customFormats","widgets","phoneNumberWidget","value","onChange","mask","maskChar","type","event","target","CustomForm","React","forwardRef","ref","formKey","data","uiSchema","transformErrors","onSubmit","onError","e","children","Fragment","showErrorList","wrapper","UserEditCard","useSelector","createUserSchema","updateUserSchema","formRef","useRef","role","aria-label","CardFooterWrapper","onClick","current","submit","module","exports","liferayServicePromise","createPromise","_resolve","_reject","promise","Promise","resolve","reject","api","expectedResultType","window","Liferay","promisifiedLiferayService","postMessage","JSON","stringify","oldPassword","newPassword1","newPassword2","passwordReset","reminderQueryQuestion","reminderQueryAnswer","screenName","emailAddress","facebookId","openId","languageId","timeZoneId","greeting","comments","firstName","middleName","lastName","prefixId","suffixId","birthdayMonth","birthdayDay","birthdayYear","smsSn","facebookSn","jabberSn","skypeSn","twitterSn","jobTitle","organizationIds","roleIds","userGroupRoles","userGroupIds","male","serviceContext","autoPassword","password1","password2","autoScreenName","locale","sendEmail","fieldName","getFieldFromLiferayObject","liferayFields","localStorage","getItem","parse","addEventListener","result","getUsersBegin","groupId","users","getUsersSuccess","getUsersFailure"],"mappings":"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","file":"static/js/9.c6e72eb0.chunk.js","sourcesContent":["import { store } from 'app/store';\nimport {\n  promisifiedLiferayService,\n  updateUserDummyData,\n  createUserDummyData,\n  getLiferayField,\n  executeLiferayService,\n} from 'app/utils/liferayUtils';\nimport {\n  saveUserBegin,\n  saveUserSuccess,\n  saveUserFailure,\n  User,\n} from '../userSlice';\nimport { getUsersApi } from './getUsersApi';\n\n// const validProperties = [\n//   'userId',\n//   'oldPassword',\n//   'newPassword1',\n//   'newPassword2',\n//   'passwordReset',\n//   'reminderQueryQuestion',\n//   'reminderQueryAnswer',\n//   'screenName',\n//   'emailAddress',\n//   'facebookId',\n//   'openId',\n//   'hasPortrait',\n//   'portraitBytes',\n//   'languageId',\n//   'timeZoneId',\n//   'greeting',\n//   'comments',\n//   'firstName',\n//   'middleName',\n//   'lastName',\n//   'prefixId',\n//   'suffixId',\n//   'male',\n//   'birthdayMonth',\n//   'birthdayDay',\n//   'birthdayYear',\n//   'smsSn',\n//   'facebookSn',\n//   'jabberSn',\n//   'skypeSn',\n//   'twitterSn',\n//   'jobTitle',\n//   'groupIds',\n//   'organizationIds',\n//   'roleIds',\n//   'userGroupRoles',\n//   'userGroupIds',\n//   'addresses',\n//   'emailAddresses',\n//   'phones',\n//   'websites',\n//   'announcementsDelivers',\n//   'agreedToTermsOfUse',\n//   'companyId',\n//   'contactId',\n//   'createDate',\n//   'defaultUser',\n//   'emailAddressVerified',\n//   'externalReferenceCode',\n//   'failedLoginAttempts',\n//   'googleUserId',\n//   'graceLoginCount',\n//   'lastFailedLoginDate',\n//   'lastLoginDate',\n//   'lastLoginIP',\n//   'ldapServerId',\n//   'lockout',\n//   'lockoutDate',\n//   'loginDate',\n//   'loginIP',\n//   'modifiedDate',\n//   'mvccVersion',\n//   'portraitId',\n//   'status',\n//   'uuid',\n// ];\n\nexport const saveUserApi = async (user: User) => {\n  // if (process.env.NODE_ENV === 'development') {\n  //   store.dispatch(saveUserSuccess());\n  //   return;\n  // }\n  try {\n    store.dispatch(saveUserBegin());\n    const userObj = user.userId\n      ? {\n          ...updateUserDummyData, // is this the appropriate place to complain that the liferay api is ridiculous?\n          companyId: await getLiferayField('companyId'),\n          groupIds: [await getLiferayField('groupId')],\n          ...user,\n        }\n      : {\n          ...createUserDummyData, // is this the appropriate place to complain that the liferay api is ridiculous?\n          companyId: await getLiferayField('companyId'),\n          groupIds: [await getLiferayField('groupId')],\n          ...user,\n        };\n\n    // const filteredUserObj = Object.keys(userObj)\n    //   .filter((key) => validProperties.includes(key))\n    //   .reduce((obj: { [key: string]: any }, key) => {\n    //     obj[key] = userObj[key as keyof typeof userObj];\n    //     return obj;\n    //   }, {});\n\n    await executeLiferayService(\n      user.userId ? '/user/update-user' : '/user/add-user',\n      userObj,\n      'object'\n    );\n    store.dispatch(saveUserSuccess());\n    getUsersApi();\n  } catch (error) {\n    store.dispatch(saveUserFailure(error));\n  }\n};\n","import { store } from 'app/store';\nimport { cancelEditForm } from '../../userSlice';\n\nexport const cancelOnClick = (): void => {\n  store.dispatch(cancelEditForm());\n};\n","import { RootState } from 'app/rootReducer';\nimport { UserEditForm } from '../userSlice';\n\nexport const getUserEditFormSelector = (state: RootState): UserEditForm =>\n  state.user.editForm;\n","import { store } from 'app/store';\nimport { setFormData } from '../../userSlice';\n\nexport const formOnChange = ({ formData }: { formData: any }) => {\n  store.dispatch(setFormData(formData));\n};\n","import { User } from '../../userSlice';\nimport { saveUserApi } from 'features/userCard/api/saveUserApi';\n\nexport const formOnSubmit = ({ formData }: { formData: User }) => {\n  console.log('submitted successfully');\n  saveUserApi(formData);\n};\n","import { store } from 'app/store';\nimport { resetEditForm } from '../../userSlice';\n\nexport const resetOnClick = () => {\n  store.dispatch(resetEditForm());\n};\n","import React from 'react';\nimport { ObjectFieldTemplateProps } from 'react-jsonschema-form';\nimport styles from './ObjectFieldTemplate.module.css';\n\nexport const ObjectFieldTemplate = ({\n  TitleField,\n  properties,\n  title,\n  description,\n  required,\n  idSchema,\n}: ObjectFieldTemplateProps) => {\n  return (\n    <fieldset>\n      <div>\n        <div className={`row ${styles.row}`}>\n          {properties.map((prop) => (\n            <div key={prop.content.key as string | number | undefined}>\n              {prop.content}\n            </div>\n          ))}\n        </div>\n        {description}\n      </div>\n    </fieldset>\n  );\n};\n","import { StatelessComponent } from 'react';\nimport { AjvError, WidgetProps } from 'react-jsonschema-form';\nimport { JSONSchema6 } from 'json-schema';\n\nimport PhoneNumberWidget from 'app/components/PhoneNumberWidget/PhoneNumberWidget';\n\n/** field title is the plain english name (with space chars). */\nconst getFieldTitleFromError = (error: AjvError, schema: JSONSchema6) => {\n  // for some reason error properties are prepended with a . so we strip 'em off\n  const propertyFromError = error.property.substr(1);\n\n  // \"as any\" necessary here because JSONSchema6 properties can be undefined for\n  // some reason that eludes me.\n  // In our case we are fine here since we know all our properties must be strings.\n  console.log((schema.properties as any)[propertyFromError].title);\n  return (schema.properties as any)[propertyFromError].title;\n};\n\n/** given errors, generate user friendly error messages in a way that react-jsonschema-form expects */\nconst getTransformErrors = (schema: JSONSchema6, formats: Formats) => (\n  errors: AjvError[]\n) => {\n  const errorStrings = getErrorStrings(formats);\n  console.log({ errorStrings, errors });\n  return errors.map((error) =>\n    Object.keys(errorStrings).includes(error.params.format)\n      ? {\n          ...error,\n          message: errorStrings[error.params.format],\n          stack: `${getFieldTitleFromError(error, schema)} ${\n            errorStrings[error.params.format]\n          }`,\n        }\n      : {\n          ...error,\n          message: error.message\n            ?.split(' ')\n            .slice(1)\n            .map((word) => (word === 'property' ? 'field' : word))\n            .join(' '),\n          stack: `${getFieldTitleFromError(error, schema)} ${error.stack\n            ?.split(' ')\n            .slice(1)\n            .map((word) => (word === 'property' ? 'field' : word))\n            .join(' ')}`,\n        }\n  );\n};\n\ninterface Formats {\n  [key: string]: {\n    regex: RegExp;\n    error: string;\n  };\n}\n\n/**\n * I think it would be best to define formats directly with the error message.\n * This isn't built into react-jsonschema-format, so I will do it myself.\n */\nconst formats: Formats = {\n  phoneNumberFormat: {\n    regex: /^$|^\\(?([2-9][0-8][0-9])\\)?[-. ]?([2-9][0-9]{2})[-. ]?([0-9]{4})$/,\n    error: 'must be valid and in the format of XXX-XXX-XXXX',\n  },\n  emailAddressFormat: {\n    regex: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n    error: 'must be in the format of something@domain.tld',\n  },\n};\n\n/** react-jsonschema-form expects formats like [key]: regex */\nconst getCustomFormats = (formats: Formats) =>\n  Object.keys(formats).reduce(\n    (customFormats, key) => ({\n      ...customFormats,\n      [key]: formats[key].regex,\n    }),\n    {}\n  );\n\ninterface ErrorStrings {\n  [key: string]: string;\n}\n\ntype GetErrorStrings = (formats: Formats) => ErrorStrings;\n\n/** transforms errors from format like [key]: regex */\nconst getErrorStrings: GetErrorStrings = (formats) =>\n  Object.keys(formats).reduce(\n    (customFormats, key) => ({\n      ...customFormats,\n      [key]: formats[key].error,\n    }),\n    {}\n  );\n\n/** extended components used by react-jsonschema-forms */\nconst widgets = {\n  phoneNumberWidget: PhoneNumberWidget as StatelessComponent<WidgetProps>,\n};\n\nexport { getTransformErrors, formats, widgets, getCustomFormats };\n","import React from 'react';\nimport InputMask from 'react-input-mask';\n\ninterface PhoneNumberWidgetProps {\n  value: string;\n  required: boolean | undefined;\n  onChange: (value: string) => void;\n}\n\n/**\n * This widget is an custom field component that can be used inside of react-jsonschema-forms\n * The props are fed in from react-jsonschema-forms.\n * It is necessary to make sure value is initialized as a string, rather than undefined.\n * Because otherwise react will give a warning about an uncontrolled component changing\n * to a controlled component. I also like input masking.\n */\nconst PhoneNumberWidget: React.FC<PhoneNumberWidgetProps> = ({\n  value = '',\n  required,\n  onChange,\n}) => (\n  <InputMask\n    mask=\"999-999-9999\"\n    maskChar=\"_\"\n    type=\"tel\"\n    className=\"form-control\"\n    value={value}\n    required={required}\n    onChange={(event): void => onChange(event.target.value)}\n  />\n);\n\nexport default PhoneNumberWidget;\n","import React, { Ref } from 'react';\nimport Form, { UiSchema } from 'react-jsonschema-form';\nimport { JSONSchema6 } from 'json-schema';\nimport styles from './CustomForm.module.css';\n\nimport { ObjectFieldTemplate } from 'app/components/ObjectFieldTemplate/ObjectFieldTemplate';\nimport {\n  widgets,\n  getCustomFormats,\n  getTransformErrors,\n  formats,\n} from 'app/utils/formUtils';\n\nexport interface CustomFormImperative {\n  submit: () => void;\n}\n\ninterface CustomFormProps {\n  formKey: number;\n  data: {};\n  schema: JSONSchema6;\n  uiSchema: UiSchema;\n  formOnChange: ({ formData }: { formData: any }) => void;\n  formOnSubmit: ({ formData }: { formData: any }) => void;\n}\n\nexport const CustomForm = React.forwardRef(\n  (\n    {\n      formKey,\n      data,\n      schema,\n      uiSchema,\n      formOnChange,\n      formOnSubmit,\n    }: CustomFormProps,\n    ref: Ref<CustomFormImperative>\n  ) => {\n    return (\n      <Form\n        // key only seems to be necessary in order to clear the form\n        // see https://github.com/rjsf-team/react-jsonschema-form/issues/953#issuecomment-397815654\n        key={formKey}\n        schema={schema}\n        uiSchema={uiSchema}\n        widgets={widgets}\n        customFormats={getCustomFormats(formats)}\n        transformErrors={getTransformErrors(schema, formats)}\n        formData={data}\n        onChange={formOnChange}\n        onSubmit={formOnSubmit}\n        onError={(e) => console.log(e)}\n        children={<React.Fragment />}\n        showErrorList={false}\n        ObjectFieldTemplate={ObjectFieldTemplate}\n        ref={ref as any}\n        className={styles.wrapper}\n      />\n    );\n  }\n);\n\n// export const CustomForm = forwardRef((\n//   { key, data, schema, uiSchema }: CustomFormProps,\n//   ref: Ref<Form>\n// ) => {\n//   const formRef = useRef<Form<{}>>();\n\n//   useImperativeHandle(ref, () => ({\n//     submit: () => {\n//       formRef?.current?.submit();\n//     },\n//   })));\n\n//   return (\n//     <Form\n//       // key only seems to be necessary in order to clear the form\n//       // see https://github.com/rjsf-team/react-jsonschema-form/issues/953#issuecomment-397815654\n//       key={key}\n//       schema={schema}\n//       uiSchema={uiSchema}\n//       widgets={widgets}\n//       customFormats={getCustomFormats(formats)}\n//       transformErrors={getTransformErrors(schema, formats)}\n//       formData={data}\n//       onChange={formOnChange}\n//       onSubmit={formOnSubmit}\n//       onError={(e) => console.log(e)}\n//       children={<React.Fragment />}\n//       showErrorList={false}\n//       ObjectFieldTemplate={ObjectFieldTemplate}\n//       ref={formRef as any}\n//     />\n//   );\n// };\n","import React, { useRef } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { CardFooterWrapper } from 'app/components/CardFooterWrapper/CardFooterWrapper';\nimport { cancelOnClick } from './cancelOnClick';\nimport { getUserEditFormSelector } from 'features/userCard/selectors/getUserEditFormSelector';\nimport { formOnChange } from './formOnChange';\nimport { formOnSubmit } from './formOnSubmit';\nimport {\n  CustomForm,\n  CustomFormImperative,\n} from 'app/components/CustomForm/CustomForm';\nimport { resetOnClick } from './resetOnClick';\n\nexport const UserEditCard: React.FC = () => {\n  const {\n    formKey,\n    data = {},\n    createUserSchema,\n    updateUserSchema,\n    uiSchema,\n  } = useSelector(getUserEditFormSelector);\n  const formRef = useRef<CustomFormImperative>(null);\n\n  return (\n    <div className=\"card\" role=\"main\" aria-label=\"User Card\">\n      <div className=\"card-header\">\n        <h5 className=\"card-title\">User Edit</h5>\n      </div>\n      <div className=\"card-body\">\n        <CustomForm\n          formKey={formKey}\n          data={data}\n          schema={data.userId ? updateUserSchema : createUserSchema}\n          uiSchema={uiSchema}\n          formOnChange={formOnChange}\n          formOnSubmit={formOnSubmit}\n          ref={formRef}\n        />\n      </div>\n      <div className=\"card-footer\">\n        <CardFooterWrapper>\n          <button\n            className=\"btn btn-primary\"\n            onClick={() => {\n              formRef.current?.submit();\n            }}\n          >\n            Save User\n          </button>\n          <button className=\"btn btn-secondary\" onClick={resetOnClick}>\n            Reset\n          </button>\n          <button className=\"btn btn-primary\" onClick={cancelOnClick}>\n            Cancel\n          </button>\n        </CardFooterWrapper>\n      </div>\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CustomForm_wrapper__1tUmo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"ObjectFieldTemplate_row__fITKL\"};","declare global {\n  interface Window {\n    Liferay: any;\n    getFieldFromLiferayObject: (fieldName: string) => string;\n    promisifiedLiferayService: (\n      api: string,\n      data: {},\n      expectedResultType: string\n    ) => Promise<{}>;\n  }\n}\n\n// This abstracts out most of the error handling and makes invoking api calls\n// inside of redux actions very tight, composable with Promise.all and\n// amenable to modern async-await syntax inside of thunk actions\nexport const promisifiedLiferayService = (\n  api: string,\n  data: {},\n  expectedResultType: any\n) =>\n  new Promise((resolve, reject) => {\n    try {\n      window.Liferay.Service(api, data, (result: any) => {\n        if (typeof result === expectedResultType) {\n          resolve(result);\n        } else if (expectedResultType === 'array' && Array.isArray(result)) {\n          resolve(result);\n        } else if (typeof result === 'string') {\n          reject(result);\n        } else {\n          reject('Unexpected error.');\n        }\n      });\n    } catch (error) {\n      reject(error);\n    }\n  });\n\nconst createPromise = () => {\n  let _resolve, _reject;\n\n  const promise: any = new Promise(function(resolve, reject) {\n    _resolve = resolve;\n    _reject = reject;\n  });\n\n  promise.resolve = _resolve;\n  promise.reject = _reject;\n\n  return promise;\n};\n\nlet liferayServicePromise: any;\n\nexport const executeLiferayService = async (\n  api: string,\n  data: {},\n  expectedResultType: 'string' | 'array' | 'object'\n) => {\n  if (window.Liferay) {\n    return window.promisifiedLiferayService(api, data, expectedResultType);\n  }\n  window.postMessage(\n    {\n      type: 'EXECUTE_LIFERAY_SERVICE',\n      api,\n      data: JSON.stringify(data),\n      expectedResultType,\n    },\n    '*'\n  );\n  liferayServicePromise = createPromise();\n  return await liferayServicePromise;\n  // return {\n  //   string: '',\n  //   array: [],\n  //   object: {},\n  // }[expectedResultType];\n};\n\nexport const updateUserDummyData = {\n  oldPassword: '',\n  newPassword1: '',\n  newPassword2: '',\n  passwordReset: false,\n  reminderQueryQuestion: '',\n  reminderQueryAnswer: '',\n  screenName: 'not_null',\n  emailAddress: 'test@example.com',\n  facebookId: 0,\n  openId: '', // this is weird: only id field here that takes a string instead of an int\n  languageId: 0,\n  timeZoneId: 0,\n  greeting: '',\n  comments: '',\n  firstName: '',\n  middleName: '',\n  lastName: '',\n  prefixId: 0,\n  suffixId: 0,\n  birthdayMonth: 1,\n  birthdayDay: 1,\n  birthdayYear: 1970,\n  smsSn: '',\n  facebookSn: '',\n  jabberSn: '',\n  skypeSn: '',\n  twitterSn: '',\n  jobTitle: 'tester',\n  groupIds: null,\n  organizationIds: [],\n  roleIds: [],\n  userGroupRoles: [],\n  userGroupIds: [],\n  male: true,\n  serviceContext: {},\n};\n\nexport const createUserDummyData = {\n  autoPassword: false,\n  password1: '', //\n  password2: '', //\n  autoScreenName: false,\n  screenName: '', //\n  emailAddress: '', //\n  facebookId: 0,\n  openId: '',\n  locale: 'en_US',\n  firstName: '', //\n  middleName: '', //\n  lastName: '', //\n  prefixId: 0,\n  suffixId: 0,\n  male: true,\n  birthdayMonth: 1,\n  birthdayDay: 1,\n  birthdayYear: 1970,\n  jobTitle: '',\n  groupIds: null,\n  organizationIds: null,\n  roleIds: null,\n  userGroupIds: null,\n  sendEmail: false,\n  serviceContext: {},\n};\n\nexport const getLiferayField = async (fieldName: string): Promise<string> => {\n  if (window.Liferay) {\n    return window.getFieldFromLiferayObject(fieldName);\n  }\n  const liferayFields = localStorage.getItem('liferayFields');\n  return JSON.parse(liferayFields as string)[fieldName];\n};\n\nwindow.addEventListener('message', function(event) {\n  if (event.data.type === 'LOCAL_RETURN_LIFERAY_SERVICE_RESULT') {\n    liferayServicePromise.resolve(event.data.result);\n  }\n});\n","import { store } from 'app/store';\nimport {\n  promisifiedLiferayService,\n  getLiferayField,\n  executeLiferayService,\n} from 'app/utils/liferayUtils';\nimport {\n  getUsersBegin,\n  getUsersSuccess,\n  getUsersFailure,\n  User,\n} from '../userSlice';\n\nconst dummyUserData: User[] = [\n  {\n    userId: '1',\n    firstName: 'Ben',\n    middleName: '',\n    lastName: 'Kinsey',\n  },\n];\n\nexport const getUsersApi = async () => {\n  // if (process.env.NODE_ENV === 'development') {\n  //   store.dispatch(getUsersSuccess(dummyUserData));\n  //   return;\n  // }\n  try {\n    store.dispatch(getUsersBegin());\n\n    // fetch('/api/jsonws/invoke', {\n    //   headers: {\n    //     accept: 'application/json, text/javascript, */*; q=0.01',\n    //     'accept-language': 'en-US,en;q=0.9',\n    //     'cache-control': 'no-cache',\n    //     'content-type': 'application/x-www-form-urlencoded; charset=UTF-8',\n    //     pragma: 'no-cache',\n    //     'sec-fetch-dest': 'empty',\n    //     'sec-fetch-mode': 'cors',\n    //     'sec-fetch-site': 'same-origin',\n    //     'x-requested-with': 'XMLHttpRequest',\n    //   },\n    //   referrer: 'http://localhost:8080/web/guest/user-admin',\n    //   referrerPolicy: 'no-referrer-when-downgrade',\n    //   body:\n    //     'cmd=' +\n    //     encodeURIComponent('/user/get-group-users\":{\"groupId\":\"20124\"}}') +\n    //     '&p_auth=Fs4bLSXH',\n    //   method: 'POST',\n    //   mode: 'cors',\n    //   credentials: 'include',\n    // })\n    //   .then((response) => response.json())\n    //   .then(console.log);\n    const users = (await executeLiferayService(\n      '/user/get-group-users',\n      {\n        groupId: await getLiferayField('groupId'),\n        // start: 1,\n        // end: 2\n      },\n      'array'\n    )) as User[];\n    store.dispatch(getUsersSuccess(users));\n  } catch (error) {\n    store.dispatch(getUsersFailure(error));\n  }\n};\n","import React from 'react';\nimport styles from './CardFooterWrapper.module.css';\n\nexport const CardFooterWrapper: React.FC = ({ children }) => (\n  <div className={styles.wrapper}>{children}</div>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CardFooterWrapper_wrapper__1sA5G\"};"],"sourceRoot":""}